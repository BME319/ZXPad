<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1.5, maximum-scale=2, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="stylesheet" href="css/jquery.mobile-1.4.2.css" />
<link href="css/jquery.dataTables.css" rel="stylesheet" type="text/css" />
<script src="js/jquery-2.1.3.js"></script>
<script src="js/jquery.mobile-1.4.2.js"></script>
<script type="text/javascript" src="js/jquery.dataTables.js"></script>
<script type="text/javascript" src="js/CommonUtility.js"></script>
<script type="application/javascript" src="js/iscroll.js"></script>
<link rel="stylesheet" type="text/css" href="css/scrollbar.css">
<link rel="stylesheet" type="text/css" href="css/scroll.css">
<script type="text/javascript" src="js/qrcode.js"></script>
<script type="text/javascript" src="js/jquery.qrcode.js"></script>
<script type="text/javascript" src="js/ProfilePage.js"></script>
<title>患者建档</title>
<style type="text/css">
div#DoctorInfoDiv.ui-grid-a .ui-block-a {
	width: 25%;
	text-align: center;
}
div#DoctorInfoDiv.ui-grid-a .ui-block-b {
	width: 75%
}
div#BasicInfoDiv.ui-grid-c .ui-block-a {
	width: 46%;
	text-align: left;
}
div#BasicInfoDiv.ui-grid-c .ui-block-b {
	width: 4%
}
div#BasicInfoDiv.ui-grid-c .ui-block-c {
	width: 46%;
	text-align: left;
}
div#BasicInfoDiv.ui-grid-c .ui-block-d {
	width: 4%
}
</style>
<style type="text/css">
.Logo {
	float: left;
}
.clearfloat {
	clear: both;
}
.sidebar {
	padding-left: 6%;
	list-style-type: none;
}
.mainInfo {
	padding-left: 10px;
	padding-right: 10px;
	width: 95%;
	float: left;
}
div#ModuleInfoDiv.ui-grid-a .ui-block-a {
	height: auto;
	width: 30%;
	font-weight: bold;
 //text-align: center;
 //border: 1px solid #F00;
}
div#ModuleInfoDiv.ui-grid-a .ui-block-b {
	height: auto;
	width: 70%;
	font-weight: bold;
 //text-align: center;
 //border: 1px solid #F00;
}
div#InvitationInfoPage.ui-grid-a .ui-block-a {
	height: auto;
	width: 20%;
	font-weight: bold;
}
div#InvitationInfoPage.ui-grid-a .ui-block-b {
	height: auto;
	width: 50%;
	font-weight: bold;
}
div#InvitationInfoPage.ui-grid-a .ui-block-c {
	height: auto;
	width: 20%;
	font-weight: bold;
}
div#InvitationInfoPage.ui-grid-a .ui-block-d {
	height: auto;
	width: 10%;
	font-weight: bold;
}
div#InvitationInfoPage.ui-grid-b .ui-block-a {
	height: auto;
	width: 20%;
	font-weight: bold;
}
div#InvitationInfoPage.ui-grid-b .ui-block-b {
	height: auto;
	width: 28%;
	font-weight: bold;
}
div#InvitationInfoPage.ui-grid-b .ui-block-c {
	height: auto;
	width: 4%;
	font-weight: bold;
}
div#InvitationInfoPage.ui-grid-b .ui-block-d {
	height: auto;
	width: 28%;
	font-weight: bold;
}
div#InvitationInfoPage.ui-grid-b .ui-block-e {
	height: auto;
	width: 20%;
	font-weight: bold;
}
</style>
</head>
<body>
<div data-role="page" id="BasicInfoPage">
<div data-position="fixed" data-role="header" data-theme="a" data-tap-toggle="false" style="height:45px"> 
  <a href="javascript: location.href='HomePage.html?';" data-icon="home" data-iconpos="notext" data-shadow="false" data-iconshadow="false">主页</a> 
  <!--<a href="HomePage.html"> <img src = "img/avatar.jpg" id="docimg" value="" style="height:30px"/> </a>-->
  <h3>患者信息</h3>
</div>
<div data-role="popup" id="SaveInsure" data-theme="a" data-overlay-theme="b" class="ui-content" style="width:300px; height:150px; padding-bottom:2em;">
  <h3 align="center" style="font-size:20px; height:50px">保存确认</h3>
  <p align="center" style="font-size:16px; height:40px"">您确定保存基本信息吗？</p>
  <div data-role="fieldcontain" align="center">
    <a href="#" data-rel="back" onclick = "SaveInfo()" class="ui-shadow ui-btn ui-corner-all ui-btn-b ui-icon-check ui-btn-icon-left ui-btn-inline ui-mini">确认</a>
    <a href="#" data-rel="back" class="ui-shadow ui-btn ui-corner-all ui-btn-inline ui-mini">取消</a>
  </div>
</div>
<div data-role="popup" id="ResetInsure" data-theme="a" data-overlay-theme="b" class="ui-content" style="width:300px; height:150px; padding-bottom:2em;">
  <h3 align="center" style="font-size:20px; height:50px">重置确认</h3>
  <p align="center" style="font-size:16px; height:40px"">您确定重置基本信息吗？</p>
  <div data-role="fieldcontain" align="center">
    <a href="#" data-rel="back" onclick = "ResetInfo()" class="ui-shadow ui-btn ui-corner-all ui-btn-b ui-icon-check ui-btn-icon-left ui-btn-inline ui-mini">确认</a>
    <a href="#" data-rel="back" class="ui-shadow ui-btn ui-corner-all ui-btn-inline ui-mini">取消</a>
  </div>
</div>
<div data-role="navbar" data-position="fixed">
  <div class="ui-grid-b">
    <div class="ui-block-a"> <a data-role="button" data-transition="slidefade" data-theme="a" href="#BasicInfoPage"> 基本信息 </a> <br>
    </div>
    <div class="ui-block-b"> <a data-role="button" data-transition="slidefade" data-theme="a" href="#ModuleInfoPage"> 慢病信息 </a> <br>
    </div>
    <div class="ui-block-c"> <a data-role="button" data-transition="slidefade" data-theme="a" href="#InvitationInfoPage"> 发送邀请 </a> <br>
    </div>
  </div>
</div>
<div data-role="content">
  <div class="ui-grid-a" id="DoctorInfoDiv">
    <div class="ui-block-a"> 
      <!--          <div>
        <label for="UserId" id="UserId"></label>
        <label for="UserName" id="UserName"></label>
      </div>-->
      <div data-role="fieldcontain">
        <table>
          <tr>
            <td>
              <label for="UserId" style="width:60px">*ID</label>
            </td>
            <td>
              <input name="UserId" type="text" id="UserId" style="background-color:#EAEAEA; height:40px" readonly>
            </td>
          </tr>
        </table> 
      </div>
      <div data-role="fieldcontain">
        <table>
          <tr>
            <td>
              <label for="UserName" style="width:60px">*姓名</label>
            </td>
            <td>
              <input type="text" name="UserName" id="UserName" style="height:40px; font-weight:50">
            </td>
          </tr>
        </table> 
      </div>
      <div>
        <label for="AlertUserName" id="AlertUserName" style="color:red">姓名必填</label>
      </div>
      <div> <img id="Photo" name="Photo" style="max-height:200px; max-width:200px"/> </div>
    </div>
    <div class="ui-block-b">
      <div class="ui-grid-c" id="BasicInfoDiv">
        <div class="ui-block-a">
          <div data-role="fieldcontain">
            <table>
              <tr>
                <td>
                  <label for="SexType" style="width:80px">*性别</label>
                </td>
                <td width="300px">
                  <select name="SexType" id="SexType" style="height:40px"></select>
               </td>
              </tr>
            </table> 
          </div>
          <div>
            <label for="AlertSex" id="AlertSex" style="color:red">性别必填</label>
          </div>
          <div data-role="fieldcontain">
            <table>
              <tr>
                <td>            
                  <label for="AboBloodType" style="width:80px">血型</label>
                </td>
                <td width="300px">
                  <select name="AboBloodType" size="1" id="AboBloodType" style="height:40px"></select>
                </td>
              </tr>
            </table> 
          </div>
          <div data-role="fieldcontain">
            <table>
              <tr>
                <td>
                  <label for="InsuranceType" style="width:80px">医保类型</label>
                </td>
                <td width="300px">
                  <select name="InsuranceType" id="InsuranceType" style="height:40px"></select>
                </td>
              </tr>
            </table> 
          </div>
          <div data-role="fieldcontain">
            <table>
              <tr>
                <td>
                  <label for="Birthday" style="width:80px">*出生日期</label>
                </td>
                <td width="300px">
                  <input type="date" name="Birthday" id="Birthday" style="height:40px">
                </td>
              </tr>
            </table>     
          </div>
          <div>
            <label for="AlertBirth" id="AlertBirth" style="color:red">生日必填</label>
          </div>
          <div data-role="fieldcontain">
            <table>
              <tr>
                <td>
                  <label for="Height" style="width:80px">身高(cm)</label>
                </td>
                <td width="300px">
                  <input type="text" name="Height" id="Height" style="height:40px">
                </td>
              </tr>
            </table> 
          </div>
          <div>
            <label for="AlertHeight" id="AlertHeight" style="color:red">身高必须为正数</label>
          </div>
          <div data-role="fieldcontain">
            <table>
              <tr>
                <td>
                  <label for="Weight" style="width:80px">体重(kg)</label>
                </td>
                <td width="300px">
                  <input type="text" name="Weight" id="Weight" style="height:40px">
                </td>
              </tr>
            </table> 
          </div>
          <div>
            <label for="AlertWeight" id="AlertWeight" style="color:red">体重必须为正数</label>
          </div>
          <div data-role="fieldcontain">
            <table>
              <tr>
                <td>
                  <label for="HomeAddress" style="width:80px">家庭住址</label>
                </td>
                <td width="300px">
                  <input type="text" name="HomeAddress" id="HomeAddress" style="height:40px">
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="ui-block-b"></div>
        <div class="ui-block-c">
          <div data-role="fieldcontain">
            <table>
              <tr>
                <td>
                  <label for="IDNo" style="width:120px">身份证号码</label>
                </td>
                <td width="300px">
                  <input type="text" name="IDNo" id="IDNo" style="height:40px">
                </td>
              </tr>
            </table>
          </div>
          <div>
            <label for="AlertID" id="AlertID" style="color:red">身份证号码必须为15位或18位</label>
          </div>
          <div data-role="fieldcontain">
            <table>
              <tr>
                <td>
                  <label for="PhoneNumber" style="width:120px">联系电话</label>
                </td>
                <td width="300px">
                  <input type="text" name="PhoneNumber" id="PhoneNumber" style="height:40px">
                </td>
              </tr>
            </table>
          </div>
          <div>
              <label for="AlertPhone" id="AlertPhone" style="color:red; width:200px">联系电话必须为手机或座机</label>  
          </div>
          <div data-role="fieldcontain">
            <table>
              <tr>
                <td>
                  <label for="Nationality" style="width:120px">国籍</label>
                </td>
                <td width="300px">
                  <input type="text" name="Nationality" id="Nationality" style="height:40px">
                </td>
              </tr>
            </table>
          </div>
          <div data-role="fieldcontain">
            <table>
              <tr>
                <td>
                  <label for="Occupation" style="width:120px">职业</label>
                </td>
                <td width="300px">
                  <input type="text" name="Occupation" id="Occupation" style="height:40px">
                </td>
              </tr>
            </table>
          </div>
          <div data-role="fieldcontain">
            <table>
              <tr>
                <td>
                  <label for="EmergencyContact" style="width:120px">紧急联系人</label>
                </td>
                <td width="300px">
                  <input type="text" name="EmergencyContact" id="EmergencyContact" style="height:40px">
                </td>
              </tr>
            </table>
          </div>
          <div data-role="fieldcontain">
            <table>
              <tr>
                <td>
                  <label for="EmergencyContactPhoneNumber" style="width:120px">紧急联系人电话</label>
                </td>
                <td width="300px">
                  <input type="text" name="EmergencyContactPhoneNumber" id="EmergencyContactPhoneNumber" style="height:40px">
                </td>
              </tr>
            </table>
          </div>
          <div>
              <label for="AlertEmergencyPhone" id="AlertEmergencyPhone" style="color:red; width:200px">联系电话必须为手机或座机</label>  
          </div>
        </div>
        <div class="ui-block-d"></div>
        <div class="ui-block-e"></div>
      </div>
    </div>
    <div>
      <input type="text" name="DoctorId" id="DoctorId" data-role="none" style="display: none;">
      <input type="text" name="InvalidFlag" id="InvalidFlag" data-role="none" style="display: none;">
      <input type="text" name="Flag" id="Flag" data-role="none" style="display: none;">
    </div>
    <div style="text-align:center">
      <a href="#ResetInsure" data-inline="true" data-rel="popup" data-position-to="window" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-icon-check ui-btn-icon-left ui-btn-a" data-transition="pop">重置</a>
      <a href="#SaveInsure" data-rel="popup" data-position-to="window" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-icon-check ui-btn-icon-left ui-btn-a" data-transition="pop">保存</a>
    </div>
  </div>
  <div data-theme="a" data-role="footer" data-position="fixed">
    <h3>copyright</h3>
  </div>
</div>
</div>

<div data-role="page" id="ModuleInfoPage">
  <div data-position="fixed" data-role="header" data-theme="a" data-tap-toggle="false" style="height:45px"> <a href="javascript: location.href='HomePage.html?';" data-icon="home" data-iconpos="notext" data-shadow="false" data-iconshadow="false">主页</a>
    <h1>患者信息</h1>
  </div>
  <div data-role="navbar" data-position="fixed">
    <div class="ui-grid-b">
      <div class="ui-block-a"> <a data-role="button" data-transition="slidefade" data-theme="a" href="#BasicInfoPage"> 基本信息 </a> <br>
      </div>
      <div class="ui-block-b"> <a data-role="button" data-transition="slidefade" data-theme="a" href="#ModuleInfoPage"> 慢病信息 </a> <br>
      </div>
      <div class="ui-block-c"> <a data-role="button" data-transition="slidefade" data-theme="a" href="#InvitationInfoPage"> 发送邀请 </a> <br>
      </div>
    </div>
  </div>
  <div data-role="content">
    <div class="ui-grid-a" id="ModuleInfoDiv">
      <div class="ui-block-a">
        <ul class="sidebar">
          <li>
            <input type="button" data-inline="true" data-theme="a" data-icon="check" data-iconpos="left" class="modulesbought" name="M1"
								value="高血压模块">
          </li>
        </ul>
      </div>
      <div class="ui-block-b">
        <input type="button" data-inline="true" data-transition="turn" data-theme="a" onclick="edit()" data-icon="edit" data-iconpos="left"
						value="编辑" id="editModuleInfo">
        <input type="button" data-inline="true" data-transition="turn" data-theme="a" onclick="save()" data-icon="check" data-iconpos="left"
						value="保存" id="saveModuleInfo">
        <div class="mainInfo" data-role="listview"> 
          <!--<h3> 详细信息 </h3>--> 
          <!--健康信息加载--> 
        </div>
        <!--<input type="button" data-inline="true" data-transition="turn" data-theme="a" onclick="edit()" data-icon="edit" data-iconpos="left"
						value="编辑" id="editModuleInfo">
				<input type="button" data-inline="true" data-transition="turn" data-theme="a" 
        onclick="save()" data-icon="check" data-iconpos="left" value="保存" id="saveModuleInfo">--> 
      </div>
    </div>
    <!--<div class="clearfloat"></div>--></div>
  <div data-theme="a" data-role="footer" data-position="fixed">
    <h3>copyright</h3>
  </div>
</div>
<div data-role="page" id="InvitationInfoPage">
  <div data-position="fixed" data-role="header" data-theme="a" data-tap-toggle="false" style="height:45px"> <a href="javascript: location.href='HomePage.html?';" data-icon="home" data-iconpos="notext" data-shadow="false" data-iconshadow="false">主页</a>
    <h1>患者信息</h1>
  </div>
  <div data-role="navbar" data-position="fixed">
    <div class="ui-grid-b">
      <div class="ui-block-a"> <a data-role="button" data-transition="slidefade" data-theme="a" href="#BasicInfoPage"> 基本信息 </a> <br>
      </div>
      <div class="ui-block-b"> <a data-role="button" data-transition="slidefade" data-theme="a" href="#ModuleInfoPage"> 慢病信息 </a> <br>
      </div>
      <div class="ui-block-c"> <a data-role="button" data-transition="slidefade" data-theme="a" href="#InvitationInfoPage"> 发送邀请 </a> <br>
      </div>
    </div>
  </div>
  <div data-role="content">
    <div class="ui-grid-a" id="InvitationInfoPage">
      <div class="ui-block-a"></div>
      <div class="ui-block-b">
        <div data-role="fieldcontain">
          <label for="InvitatoinPhoneNo">手机号：</label>
          <input type="text" name="InvitatoinPhoneNo" id="InvitatoinPhoneNo" style="height:40px">
        </div>
      </div>
      <div class="ui-block-c">
        <input type="button" data-inline="true" data-transition="turn" data-theme="a" onclick="SendInvitation(); Time()" data-iconpos="left"
						value="发送邀请码" id="SendInvitation">
      </div>
    </div>
    <div class="ui-grid-b" id="InvitationInfoPage">
      <div class="ui-block-a"></div>
      <div class="ui-block-b">
        <label style="alignment-adjust:central; display:none" id="download">下载地址</label>
      </div>
      <div class="ui-block-c"></div>
      <div class="ui-block-d">
        <label style="alignment-adjust:central; display:none" id="Invitation">您的邀请码</label>
      </div>
    </div>
    <div class="ui-grid-b" id="InvitationInfoPage">
      <div class="ui-block-a"></div>
      <div id="Downloadcode" class="ui-block-b"></div>
      <div class="ui-block-c"></div>
      <div id="Invitationcode" class="ui-block-d"></div>
    </div>
    
    <!--<div class="clearfloat"></div>--></div>
  <div data-theme="a" data-role="footer" data-position="fixed">
    <h3>copyright</h3>
  </div>
</div>
</body>
<script>
//Loading show

$(document).on("pagebeforehide", "#BasicInfoPage", function(){

console.log("BasicInfoPage pagehide");
$.mobile.loading( 'show', {text: 'loading', textVisible: true, textonly: false,});
});

$(document).on("pagebehide", "#BasicInfoPage", function(){

console.log("BasicInfoPage pagehide");
$.mobile.loading( 'show', {text: 'loading', textVisible: true, textonly: false,});
});
$(document).on("pagebeforeshow", "#ModuleInfoPage", function(){
$.mobile.loading( 'show', {text: 'loading', textVisible: true, textonly: false,});
//$.mobile.loading( "hide" ); 
});


	//Loading hide
$(document).on("pageshow", "#BasicInfoPage", function(){

console.log("pageshow");
$.mobile.loading( "hide" ); 
});
$(document).on("pageshow", "#ModuleInfoPage", function(){
//$.mobile.loading( 'show', {text: 'loading', textVisible: true, textonly: false,});
$.mobile.loading( "hide" ); 
});
$(document).on("pageshow", "#InvitationInfoPage", function(){

$.mobile.loading( "hide" ); 
});


		<!--全局变量-->
		
//			var revUserId = "zcy";
//			var TerminalName = "zcy-PC";
//			var TerminalIP = "10.12.43.35";
//			var DeviceType = "1";
			
			var revUserId = localStorage.getItem('UserId');
			var TerminalName = localStorage.getItem('TerminalName');
			var TerminalIP = localStorage.getItem('TerminalIP');
			var DeviceType = localStorage.getItem('DeviceType');
					
//			var UserId = "test8888";
			var UserId = localStorage.getItem("PatientId");
			var DoctorId = localStorage.getItem('DoctorID');
//			var DoctorId = "D003";
			var CategoryCode = localStorage.getItem("ModuleType");
			//console.log("module is " + CategoryCode);
			var CategoryName = "高血压模块";
			
			//Check network
			//ConnectWebserivce();
			
			//$(document).on("pageshow", "#InvitationInfoPage", function(){
			//alert('Get Patient PhoneNumber.');			
			//$('#InvitatoinPhoneNo').attr('value', $('#PhoneNumber').val());
			//$('#InvitatoinPhoneNo').val($('#PhoneNumber').val());		  
		  //});
		

	</script>
<script type="text/javascript">
		/*$(document).ready(function () {	 
				var newPatientFlag = localStorage.getItem('NewPatientFlag');
				if(newPatientFlag == 'false')
				{
					//alert(CategoryCode);
					GetItemInfoByPIdAndModule(UserId,CategoryCode,CategoryName);
				}
				else
				{
					//alert("New Patient fromDict");
					GetItemInfoFromDict(UserId,"M1",CategoryName)
				}
				//$(".mainInfo label").css("width","20%");
				//$(".dropdrowlist").css("width","60%").parent().css("width","60%");
				//$(".textbox").css("width","60%").parent().css("width","60%");	
		   })*/
      //$(document).on("pageinit", "#ModuleInfoPage", function(){
           		$(document).ready(function () {
        
        		$.mobile.loading( "show", {
            text: 'loading',
            textVisible: true,
            textonly: false,
    });
				var newPatientFlag = localStorage.getItem('NewPatientFlag');
				if(newPatientFlag == 'false')
				{
					//alert(CategoryCode);
					GetItemInfoByPIdAndModule(UserId,CategoryCode,CategoryName);
				}
				else
				{
					//alert("New Patient fromDict");
					GetItemInfoFromDict(UserId,"M1",CategoryName)
				}
  			   	$.mobile.loading( "hide" ); 
		  });
			
			

		  
	</script>
</html>